<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Incompatibilities with Ada 2005</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-bottom: 0.6em}
    DIV.Indented1 {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 2.0em; margin-bottom: 0.6em}
    DIV.SwissExamples {font-family: Arial, Helvetica, sans-serif; font-size: 90%; line-height: 122%; margin-left: 2.2em; margin-bottom: 0.6em}
    DIV.Indented2NarrowHanging-Body {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 4.0em; margin-top: 0em; margin-bottom: 0.6em}
    DIV.Indented2NarrowHanging-Term {float: left; font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 2.0em; margin-top: 0em; margin-bottom: 0em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">
<H1 Style='font-family: "Rockwell", "Times New Roman", Times, serif; font-size: 240%'><B><SPAN Style="color:rgb(0,0,153)">Rationale</SPAN> for <SPAN Style="color:rgb(0,153,51)">Ada 2012</SPAN></B></H1>
<DIV Class="Normal"><FONT SIZE="+1"><I><A HREF="Rat12-TTL.html">John Barnes</A></I></FONT></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="Rat12-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="Rat12-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="Rat12-0-3.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="Rat12-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="Rat12-9-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="Rat12-9-1-2.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>9.1.1 Incompatibilities with Ada 2005</H1>
<div class="Normal">Each incompatibility listed below gives the AI concerned 
and the paragraph in the AARM which in some cases will give more information. 
Where relevant, the section in this rationale where the topic is discussed 
is also given. Where appropriate the incompatibilities are grouped together.</div>
<div class="Normal">Note that this list only covers those incompatibilities 
that might reasonably occur. There are a number of others which are so 
unlikely that they do not seem worth mentioning.</div>
<div class="Normal">1 &mdash; The word <B>some</B> is now reserved. Programs 
using it as an identifier will need to be changed. (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0176-1.TXT">AI-176</A>, 
<A HREF="http://www.ada-auth.org/standards/12rm/html/RM-2-9.html">2.9</A>)</div>
<div class="Normal">Adding new reserved words is a very visible incompatibility. 
Six were added in Ada 95, three in Ada 2005, and now just one in Ada 
2012. Perhaps this is the end of the matter. The word <B>some</B> is 
used in quantified expressions; it already was reserved in SPARK <A HREF="Rat12-0-3.html#R25">[25]</A> 
where it is used in quantified expressions in proof contexts.</div>
<div class="Normal">2 &mdash; If a predefined package has additional 
entities then incompatibilities can arise. Thus suppose the predefined 
package <SPAN Class="swiss">Ada.Stuff</SPAN> has an additional entity 
<SPAN Class="swiss">More</SPAN> added to it. Then if an Ada 2005 program 
has a package <SPAN Class="swiss">P</SPAN> containing an entity <SPAN Class="swiss">More</SPAN> 
then a program with a use clause for both <SPAN Class="swiss">Ada.Stuff</SPAN> 
and <SPAN Class="swiss">P</SPAN> will become illegal in Ada 2012 because 
the reference to <SPAN Class="swiss">More</SPAN> will become ambiguous. 
This also applies if further overloadings of an existing entity are added.</div>
<div class="Normal">This can be overcome by adding child packages of 
course. However, adding lots of child packages can be an inconvenience 
for the user and so in many cases extending a package seemed more appropriate 
especially if the identifiers concerned are unlikely to have been used 
by programmers.</div>
<div class="Normal">The following packages have been extended with additional 
entities as listed.</div>
<div class="Indented2NarrowHanging-Term"><SPAN Class="swiss">Ada.Characters.Handling</SPAN> 
&mdash;</div><div class="Indented2NarrowHanging-Body"><br clear="left">
<SPAN Class="swiss">Is_Line_Terminator</SPAN>, <SPAN Class="swiss">Is_Mark</SPAN>, 
<SPAN Class="swiss">Is_Other_Format</SPAN>, <SPAN Class="swiss">Is_Punctuation_Connector</SPAN>, 
<SPAN Class="swiss">Is_Space</SPAN>. (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0185-1.TXT">AI-185</A>, 
<A HREF="http://www.ada-auth.org/standards/12rm/html/RM-A-3-2.html">A.3.2</A>) 
<A NAME="I1671"></A><A NAME="I1672"></A></div>
<div class="Indented2NarrowHanging-Term"><SPAN Class="swiss">Ada.Containers</SPAN> 
&mdash;</div><div class="Indented2NarrowHanging-Body"><br clear="left">
<SPAN Class="swiss">Capacity_Error</SPAN>. (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0001-1.TXT">AI-1</A>, 
<A HREF="http://www.ada-auth.org/standards/12rm/html/RM-A-18-1.html">A.18.1</A>) 
<A NAME="I1673"></A><A NAME="I1674"></A></div>
<div class="Indented2NarrowHanging-Term"><SPAN Class="swiss">Ada.Containers.Vectors</SPAN> 
&mdash;</div><div class="Indented2NarrowHanging-Body"><br clear="left">
<SPAN Class="swiss">Assign</SPAN>, <SPAN Class="swiss">Copy</SPAN>, <SPAN Class="swiss">Constant_ 
Reference</SPAN>, <SPAN Class="swiss">Constant_Reference_Type</SPAN>, 
<SPAN Class="swiss">Iterate</SPAN>, <SPAN Class="swiss">Reference</SPAN>, 
<SPAN Class="swiss">Reference_Type</SPAN>, <SPAN Class="swiss">Vector_Iterator_Interfaces</SPAN>. 
(<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0001-1.TXT">AI-1</A>, 
<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0212-1.TXT">AI-211</A>, 
<A HREF="http://www.ada-auth.org/standards/12rm/html/RM-A-18-2.html">A.18.2</A>) 
<A NAME="I1675"></A><A NAME="I1676"></A></div>
<div class="Indented1">There are similar additions to the other containers 
<SPAN Class="swiss">Ada.Containers.Doubly_Linked_Lists</SPAN> etc.</div>
<div class="Indented2NarrowHanging-Term"><SPAN Class="swiss">Ada.Directories</SPAN> 
&mdash;</div><div class="Indented2NarrowHanging-Body"><br clear="left">
<SPAN Class="swiss">Name_Case_Kind</SPAN>, <SPAN Class="swiss">Name_Case_Equivalence</SPAN>. 
(<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0049-1.TXT">AI-49</A>, 
<A HREF="http://www.ada-auth.org/standards/12rm/html/RM-A-16.html">A.16</A>) 
<A NAME="I1677"></A><A NAME="I1678"></A></div>
<div class="Indented2NarrowHanging-Term"><SPAN Class="swiss">Ada.Dispatching</SPAN> 
&mdash;</div><div class="Indented2NarrowHanging-Body"><br clear="left">
<SPAN Class="swiss">Yield</SPAN>. (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0166-1.TXT">AI-166</A>, 
<A HREF="http://www.ada-auth.org/standards/12rm/html/RM-D-2-1.html">D.2.1</A>) 
<A NAME="I1679"></A><A NAME="I1680"></A></div>
<div class="Indented2NarrowHanging-Term"><SPAN Class="swiss">Ada.Environment_Variables</SPAN> 
&mdash;</div><div class="Indented2NarrowHanging-Body"><br clear="left">
<SPAN Class="swiss">Value</SPAN>. (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0285-1.TXT">AI-285</A>, 
<A HREF="http://www.ada-auth.org/standards/12rm/html/RM-A-17.html">A.17</A>) 
<A NAME="I1681"></A><A NAME="I1682"></A></div>
<div class="Indented2NarrowHanging-Term"><SPAN Class="swiss">Ada.Execution_Time</SPAN> 
&mdash;</div><div class="Indented2NarrowHanging-Body"><br clear="left">
<SPAN Class="swiss">Interrupt_Clocks_Supported</SPAN>, <SPAN Class="swiss">Separate_Interrupt_Clocks_Supported</SPAN>, 
<SPAN Class="swiss">Clocks_For_Interrupts</SPAN>. (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0170-1.TXT">AI-170</A>, 
<A HREF="http://www.ada-auth.org/standards/12rm/html/RM-D-14.html">D.14</A>) 
<A NAME="I1683"></A><A NAME="I1684"></A></div>
<div class="Indented2NarrowHanging-Term"><SPAN Class="swiss">Ada.Task_Identification</SPAN> 
&mdash;</div><div class="Indented2NarrowHanging-Body"><br clear="left">
<SPAN Class="swiss">Environment_Task</SPAN>, <SPAN Class="swiss">Activation_Is_Complete</SPAN>. 
(<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0189-1.TXT">AI-189</A>, 
<A HREF="http://www.ada-auth.org/standards/12rm/html/RM-C-7-1.html">C.7.1</A>) 
<A NAME="I1685"></A><A NAME="I1686"></A></div>
<div class="Indented2NarrowHanging-Term"><SPAN Class="swiss">Ada.Strings.Fixed</SPAN> 
&mdash;</div><div class="Indented2NarrowHanging-Body"><br clear="left">
<SPAN Class="swiss">Find_Token</SPAN>. (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0031-1.TXT">AI-31</A>, 
<A HREF="http://www.ada-auth.org/standards/12rm/html/RM-A-4-3.html">A.4.3</A>) 
<A NAME="I1687"></A><A NAME="I1688"></A></div>
<div class="Indented2NarrowHanging-Term"><SPAN Class="swiss">Ada.Strings.Bounded</SPAN> 
&mdash;</div><div class="Indented2NarrowHanging-Body"><br clear="left">
<SPAN Class="swiss">Find_Token</SPAN>. (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0031-1.TXT">AI-31</A>, 
<A HREF="http://www.ada-auth.org/standards/12rm/html/RM-A-4-4.html">A.4.4</A>) 
<A NAME="I1689"></A><A NAME="I1690"></A></div>
<div class="Indented2NarrowHanging-Term"><SPAN Class="swiss">Ada.Strings.Unbounded</SPAN> 
&mdash;</div><div class="Indented2NarrowHanging-Body"><br clear="left">
<SPAN Class="swiss">Find_Token</SPAN>. (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0031-1.TXT">AI-31</A>, 
<A HREF="http://www.ada-auth.org/standards/12rm/html/RM-A-4-5.html">A.4.5</A>) 
<A NAME="I1691"></A><A NAME="I1692"></A></div>
<div class="Indented1">There are similar additions to <SPAN Class="swiss">Ada.Strings.Wide_Fixed</SPAN>, 
<SPAN Class="swiss">Ada.Strings.Wide_Bounded</SPAN> and <SPAN Class="swiss">Ada.Strings.Wide_Unbounded</SPAN>. 
(<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0031-1.TXT">AI-31</A>, 
<A HREF="http://www.ada-auth.org/standards/12rm/html/RM-A-4-7.html">A.4.7</A>)</div>
<div class="Indented2NarrowHanging-Term"><SPAN Class="swiss">Ada.Tags</SPAN> 
&mdash;</div><div class="Indented2NarrowHanging-Body"><br clear="left">
<SPAN Class="swiss">Is_Abstract</SPAN>. (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0173-1.TXT">AI-173</A>, 
<A HREF="http://www.ada-auth.org/standards/12rm/html/RM-3-9.html">3.9</A>) 
<A NAME="I1693"></A><A NAME="I1694"></A></div>
<div class="Normal">It seems unlikely that existing programs will be 
affected by these potential incompatibilities.</div>
<div class="Normal">3 &mdash; Membership tests are no longer allowed 
as a discrete choice. This is explained in detail in Section <A HREF="Rat12-3-6.html">3.6</A> 
of the chapter on Expressions. (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0158-1.TXT">AI-158</A>, 
<A HREF="http://www.ada-auth.org/standards/12rm/html/RM-3-8-1.html">3.8.1</A>)</div>
<div class="Normal">4 &mdash; Allowing functions to have parameters of 
all modes led to the introduction of stricter rules on aliasing. It is 
possible that a program that seemed to work in Ada 2005 is illegal in 
Ada 2012. See Section <A HREF="Rat12-4-2.html">4.2</A> of the chapter 
on Structure and Visibility. (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0144-1.TXT">AI-144</A>, 
<A HREF="http://www.ada-auth.org/standards/12rm/html/RM-6-4-1.html">6.4.1</A>)</div>
<div class="Normal">5 &mdash; Implicit conversion is now allowed from 
anonymous access types to general access types. Such conversions can 
make calls ambiguous in the presence of overloading where only one call 
was permitted in Ada 2005. Consider</div>
<div class="SwissExamples"><B>type</B>&nbsp;RT&nbsp;<B>is&nbsp;access&nbsp;all</B>&nbsp;T;<BR>
<B>function</B>&nbsp;F&nbsp;<B>return</B>&nbsp;RT;<BR>
<B>function</B>&nbsp;F&nbsp;<B>return&nbsp;access</B>&nbsp;T;</div>
<div class="SwissExamples"><B>procedure</B>&nbsp;B(R:&nbsp;RT);</div>
<div class="Normal" style="margin-bottom: 0.4em">and then the call</div>
<div class="SwissExamples">B(F);&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>ambiguous&nbsp;in&nbsp;Ada&nbsp;2012</I></SPAN></div>
<div class="Normal">The call of <SPAN Class="swiss">B</SPAN> is ambiguous 
in Ada 2012 because the call could be to either function <SPAN Class="swiss">F</SPAN>. 
But in Ada 2005, the implicit conversion is not possible and so the call 
has to be to the first function <SPAN Class="swiss">F</SPAN>. (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0149-1.TXT">AI-149</A>, 
<A HREF="http://www.ada-auth.org/standards/12rm/html/RM-8-6.html">8.6</A>)</div>
<div class="Normal">6 &mdash; It is now illegal to declare a formal abstract 
subprogram whose controlling type is incomplete. This is related to various 
improvements to incomplete types described in Section <A HREF="Rat12-4-3.html">4.3</A> 
of the chapter on Structure and Visibility. (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0296-1.TXT">AI-296</A>, 
<A HREF="http://www.ada-auth.org/standards/12rm/html/RM-12-6.html">12.6</A>)</div>
<div class="Normal">7 &mdash; The pragma <SPAN Class="swiss">Controlled</SPAN> 
has been removed from the language. It was never implemented anyway. 
(<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0229-1.TXT">AI-229</A>, 
<A HREF="http://www.ada-auth.org/standards/12rm/html/RM-13-11-3.html">13.11.3</A>) 
<A NAME="I1695"></A><A NAME="I1696"></A></div>
<div class="Normal">8 &mdash; The package <SPAN Class="swiss">Ada.Dispatching</SPAN> 
was <SPAN Class="swiss">Pure</SPAN> in Ada 2005 but has been downgraded 
to <SPAN Class="swiss">Preelaborable</SPAN> because of the addition of 
<SPAN Class="swiss">Yield</SPAN>. This is unlikely to be a problem. (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0166-1.TXT">AI-166</A>, 
<A HREF="http://www.ada-auth.org/standards/12rm/html/RM-D-2-1.html">D.2.1</A>) 
<A NAME="I1697"></A><A NAME="I1698"></A></div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="Rat12-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="Rat12-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="Rat12-0-3.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="Rat12-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="Rat12-9-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="Rat12-9-1-2.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Class="Normal">&copy; 2011, 2012, 2013 John Barnes Informatics.</DIV>
<DIV Class="Normal">Sponsored in part by:</DIV>
<TABLE Summary="Sponsors" Width="800">
<TR><TD Width="250" Align="Center" VAlign="Top">
<SPAN Style="font-family: Arial, Helvetica, sans-serif; font-size: 92%">The <b><A HREF="http://www.adaic.org/community/">Ada Resource Association</A></b>:<BR><BR>
&nbsp;&nbsp;&nbsp; <A HREF="http://www.adaic.org"><IMG SRC="aralogo.gif" ALT="ARA" Height="120" Border="0"></A></SPAN>
</TD>
<TD Width="300" Align="Center" VAlign="Top">
<SPAN Style="font-family: Arial, Helvetica, sans-serif; font-size: 92%">&nbsp; <b><A HREF="http://www.adacore.com">AdaCore</A></b>:<BR><BR><BR>
&nbsp;&nbsp;&nbsp; <A HREF="http://www.adacore.com"><IMG SRC="adacore.gif" ALT="AdaCore" Height="80" Border="0"></A></SPAN>
</TD>
<TD Width="250" Align="Center" VAlign="Top">
<SPAN Style="font-family: Arial, Helvetica, sans-serif; font-size: 92%">and &nbsp; <b><A HREF="http://www.ada-europe.org">Ada-Europe</A></b>:<BR><BR>
<A HREF="http://www.ada-europe.org"><IMG SRC="AE_logo.gif" ALT="Ada-Europe" Height="128" Border="0"></A></SPAN>
</TD></TR>
</TABLE>
</BODY>
</HTML>
