<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Restrictions</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-bottom: 0.6em}
    DIV.Indented1 {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 2.0em; margin-bottom: 0.6em}
    DIV.SwissExamples {font-family: Arial, Helvetica, sans-serif; font-size: 90%; line-height: 122%; margin-left: 2.2em; margin-bottom: 0.6em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">
<H1 Style='font-family: "Rockwell", "Times New Roman", Times, serif; font-size: 240%'><B><SPAN Style="color:rgb(0,0,153)">Rationale</SPAN> for <SPAN Style="color:rgb(0,153,51)">Ada 2012</SPAN></B></H1>
<DIV Class="Normal"><FONT SIZE="+1"><I><A HREF="Rat12-TTL.html">John Barnes</A></I></FONT></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="Rat12-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="Rat12-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="Rat12-0-3.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="Rat12-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="Rat12-6-4.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="Rat12-6-6.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>6.5 Restrictions</H1>
<div class="Normal">Restrictions provide a valuable way of increasing 
security. Ada is a rich language and even richer with Ada 2012 and although 
individual features are straightforward, certain combinations can cause 
problems.</div>
<div class="Normal">The new restrictions introduced into Ada 2012 have 
already been described in this or earlier chapters such as the Introduction 
(see <A HREF="Rat12-1-3-5.html">1.3.5</A>). However, for convenience 
here is a complete list giving the annex where appropriate. <A NAME="I1511"></A><A NAME="I1512"></A></div>
<div class="Normal" style="margin-bottom: 0.4em">The new <SPAN Class="swiss">Restrictions</SPAN> 
identifiers are</div>
<div class="SwissExamples">No_Access_Parameter_Allocators&nbsp;&nbsp;&nbsp;&nbsp;High-Integrity<BR>
No_Anonymous_Allocators&nbsp;&nbsp;&nbsp;&nbsp;High-Integrity<BR>
No_Coextensions&nbsp;&nbsp;&nbsp;&nbsp;High-Integrity<BR>
No_Implementation_Aspect_Specifications<BR>
No_Implementation_Identifiers<BR>
No_Implementation_Units<BR>
No_Specification_Of_Aspect<BR>
No_Standard_Allocators_After_Elaboration&nbsp;&nbsp;&nbsp;&nbsp;Real-Time<BR>
No_Use_Of_Attribute<BR>
No_Use_Of_Pragma</div>
<div class="Normal" style="margin-bottom: 0.4em">Some of the new <SPAN Class="swiss">Restrictions</SPAN> 
identifiers are in the High-Integrity annex. They are</div>
<div class="SwissExamples"><B>pragma</B>&nbsp;Restrictions(No_Access_Parameter_Allocators);</div>
<div class="SwissExamples"><B>pragma</B>&nbsp;Restrictions(No_Anonymous_Allocators);</div>
<div class="SwissExamples"><B>pragma</B>&nbsp;Restrictions(No_Coextensions);</div>
<div class="Normal">and these were discussed in the previous section. 
<A NAME="I1513"></A><A NAME="I1514"></A><A NAME="I1515"></A><A NAME="I1516"></A><A NAME="I1517"></A><A NAME="I1518"></A></div>
<div class="Normal" style="margin-bottom: 0.4em">In a similar vein there 
is one new restriction in the Real-Time annex, namely</div>
<div class="SwissExamples"><B>pragma</B>&nbsp;Restrictions(No_Standard_Allocators_After_Elaboration);</div>
<div class="Normal">and this was also discussed in the previous section. 
<A NAME="I1519"></A><A NAME="I1520"></A></div>
<div class="Normal" style="margin-bottom: 0.4em">A number of restrictions 
prevent the use of implementation-defined features. They are <A NAME="I1521"></A><A NAME="I1522"></A><A NAME="I1523"></A><A NAME="I1524"></A><A NAME="I1525"></A><A NAME="I1526"></A></div>
<div class="SwissExamples"><B>pragma</B>&nbsp;Restrictions(No_Implementation_Aspect_Specifications);</div>
<div class="SwissExamples"><B>pragma</B>&nbsp;Restrictions(No_Implementation_Identifiers);</div>
<div class="SwissExamples"><B>pragma</B>&nbsp;Restrictions(No_Implementation_Units);</div>
<div class="Normal">These do not apply to the whole partition but only 
to the compilation or environment concerned. This helps us to ensure 
that implementation dependent areas of a program are identified. They 
were discussed in the Introduction (see <A HREF="Rat12-1-3-5.html">1.3.5</A>) 
and join similar restrictions <SPAN Class="swiss">No_Implementation_Attributes</SPAN> 
and <SPAN Class="swiss">No_Implementation_Pragmas</SPAN> introduced in 
Ada 2005.</div>
<div class="Normal">The restrictions on implementation-defined aspect 
specifications, attributes and pragmas are obvious but some clarification 
of what is meant by the restrictions on units and identifiers might be 
helpful.</div>
<div class="Normal">It will be recalled that the predefined packages 
are <SPAN Class="swiss">Ada</SPAN>, <SPAN Class="swiss">System</SPAN> 
and <SPAN Class="swiss">Interfaces</SPAN> plus various children. In the 
so-called standard mode, implementations are not permitted to add their 
own child packages of <SPAN Class="swiss">Ada</SPAN> but can add grandchildren. 
Thus an implementation might add an additional container package called 
perhaps <SPAN Class="swiss">Ada.Containers.Slopbucket</SPAN>. If a program 
were to use this grandchild then clearly it would be unlikely to be portable 
to other implementations. Accordingly, giving the restriction <SPAN Class="swiss">No_Implementation_Units</SPAN> 
prevents such potential difficulties. Similarly, this restriction prevents 
the use of implementation-defined child units of <SPAN Class="swiss">System</SPAN> 
and <SPAN Class="swiss">Interfaces</SPAN>.</div>
<div class="Normal" style="margin-bottom: 0.4em">The restriction <SPAN Class="swiss">No_Implementation_Identifiers</SPAN> 
is more subtle. It will be recalled that several predefined packages 
are permitted to add implementation-defined identifiers. They are</div>
<div class="Indented1"><SPAN Class="swiss">Standard</SPAN>,<BR>
<SPAN Class="swiss">System</SPAN>,<BR>
<SPAN Class="swiss">Ada.Command_Line</SPAN>,<BR>
<SPAN Class="swiss">Interfaces.C</SPAN>,<BR>
<SPAN Class="swiss">Interfaces.C.Strings</SPAN>,<BR>
<SPAN Class="swiss">Interfaces.C.Pointers</SPAN>,<BR>
<SPAN Class="swiss">Interfaces.COBOL</SPAN>,<BR>
and&nbsp;<SPAN Class="swiss">Interfaces.Fortran</SPAN>.</div>
<div class="Normal" style="margin-bottom: 0.4em">Moreover, the following 
predefined packages only contain implementation-defined identifiers</div>
<div class="Indented1"><SPAN Class="swiss">Interfaces</SPAN>,<BR>
<SPAN Class="swiss">System.Machine_Code</SPAN>,<BR>
<SPAN Class="swiss">Ada.Directories.Information</SPAN>,<BR>
<SPAN Class="swiss">Ada.Directories.Names</SPAN>,<BR>
and&nbsp;the&nbsp;packages&nbsp;<SPAN Class="swiss">Implementation</SPAN>&nbsp;nested&nbsp;in&nbsp;the&nbsp;queue&nbsp;containers.</div>
<div class="Normal">The restriction <SPAN Class="swiss">No_Implementation_Identifiers</SPAN> 
prevents the use of any of these.</div>
<div class="Normal">There is a slight subtlety regarding <SPAN Class="swiss">Long_Integer</SPAN> 
and <SPAN Class="swiss">Long_Float</SPAN> in <SPAN Class="swiss">Standard</SPAN>. 
The types <SPAN Class="swiss">Integer</SPAN> and <SPAN Class="swiss">Float</SPAN> 
must be provided. Types such as <SPAN Class="swiss">Short_Integer</SPAN> 
and <SPAN Class="swiss">Long_Long_Float</SPAN> may be provided but are 
definitely considered to be implementation-defined and so excluded by 
the restriction on implementation identifiers. However, <SPAN Class="swiss">Long_Integer</SPAN> 
and <SPAN Class="swiss">Long_Float</SPAN> should be provided (if the 
hardware is capable) and so are considered to be predefined and not covered 
by the restriction. Nevertheless, an implementation on a specialized 
small machine might not provide them.</div>
<div class="Normal" style="margin-bottom: 0.4em">Finally, there are 
restrictions preventing the use of particular facilities <A NAME="I1527"></A><A NAME="I1528"></A><A NAME="I1529"></A><A NAME="I1530"></A><A NAME="I1531"></A><A NAME="I1532"></A></div>
<div class="SwissExamples"><B>pragma</B>&nbsp;Restrictions(No_Specification_Of_Aspect&nbsp;=&gt;&nbsp;X);</div>
<div class="SwissExamples"><B>pragma</B>&nbsp;Restrictions(No_Use_Of_Attribute&nbsp;=&gt;&nbsp;X);</div>
<div class="SwissExamples"><B>pragma</B>&nbsp;Restrictions(No_Use_Of_Pragma&nbsp;=&gt;&nbsp;X);</div>
<div class="Normal">where <SPAN Class="swiss">X</SPAN> is the name of 
a specific aspect, attribute or pragma respectively. They are similar 
to the restriction <SPAN Class="swiss">No_Dependence</SPAN> introduced 
in Ada 2005. They apply to a complete partition.</div>
<div class="Normal" style="margin-bottom: 0.4em">Note that <SPAN Class="swiss">No_Specification_Of_Aspect</SPAN> 
prevents the specification of an aspect by any means. Remember that some 
aspects can be specified by an aspect specification or by a pragma or 
by an attribute definition clause. Thus we mentioned above that a storage 
pool could be given by an attribute definition clause thus</div>
<div class="SwissExamples"><B>type</B>&nbsp;Cell_Ptr&nbsp;<B>is&nbsp;access</B>&nbsp;Cell;<BR>
<B>for</B>&nbsp;Cell_Ptr'Storage_Pool&nbsp;<B>use</B>&nbsp;Cell_Ptr_Pool;</div>
<div class="Normal" style="margin-bottom: 0.4em">or by using an aspect 
specification thus</div>
<div class="SwissExamples"><B>type</B>&nbsp;Cell_Ptr&nbsp;<B>is&nbsp;access</B>&nbsp;Cell<BR>
&nbsp;&nbsp;&nbsp;<B>with</B>&nbsp;Storage_Pool&nbsp;=&gt;&nbsp;Cell_Ptr_Pool;</div>
<div class="Normal" style="margin-bottom: 0.4em">Writing</div>
<div class="SwissExamples"><B>pragma</B>&nbsp;Restrictions(No_Specification_Of_Aspect&nbsp;=&gt;&nbsp;Storage_Pool);</div>
<div class="Normal" style="margin-bottom: 0.4em">prevents both of these 
whereas</div>
<div class="SwissExamples"><B>pragma</B>&nbsp;Restrictions(No_Use_Of_Attribute&nbsp;=&gt;&nbsp;Strorage_Pool);</div>
<div class="Normal">prevents only the first. Naturally, <SPAN Class="swiss">No_Use_Of_Attribute</SPAN> 
prevents both setting an attribute and reading it whereas <SPAN Class="swiss">No_Specification_Of_Aspect</SPAN> 
prevents just setting it. Thus we might want to read <SPAN Class="swiss">'Size</SPAN> 
but prevent setting it.</div>
<div class="Normal" style="margin-bottom: 0.4em">Similarly</div>
<div class="SwissExamples"><B>pragma</B>&nbsp;Restrictions(No_Specification_Of_Aspect&nbsp;=&gt;&nbsp;Pack);</div>
<div class="Normal" style="margin-bottom: 0.4em">prevents both</div>
<div class="SwissExamples"><B>type</B>&nbsp;Flags&nbsp;<B>is&nbsp;array</B>&nbsp;(1&nbsp;..&nbsp;8)&nbsp;<B>of</B>&nbsp;Boolean<BR>
&nbsp;&nbsp;&nbsp;<B>with</B>&nbsp;Pack;</div>
<div class="Normal" style="margin-bottom: 0.4em">and</div>
<div class="SwissExamples"><B>type</B>&nbsp;Flags&nbsp;<B>is&nbsp;array</B>&nbsp;(1&nbsp;..&nbsp;8)&nbsp;<B>of</B>&nbsp;Boolean;<BR>
<B>pragma</B>&nbsp;Pack(Flags);</div>
<div class="Normal" style="margin-bottom: 0.4em">whereas</div>
<div class="SwissExamples"><B>pragma</B>&nbsp;Restrictions(No_Use_Of_Pragma&nbsp;=&gt;&nbsp;Pack);</div>
<div class="Normal">prevents only the latter.</div>
<div class="Normal">In summary, <SPAN Class="swiss">No_Specification_Of_Aspect</SPAN> 
does not mean <SPAN Class="swiss">No_Aspect_Specification</SPAN> (which 
does not exist).</div>
<div class="Normal" style="margin-bottom: 0.4em">Remember that several 
restrictions can be given in one pragma, so we might have</div>
<div class="SwissExamples"><B>pragma</B>&nbsp;Restrictions(No_Use_Of_Pragma&nbsp;=&gt;&nbsp;P,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No_Use_Of_Attribute&nbsp;&nbsp;=&gt;&nbsp;A);</div>
<div class="Normal" style="margin-bottom: 0.4em">As mentioned in the 
Introduction (see <A HREF="Rat12-1-3-5.html">1.3.5</A>) there is also 
a new profile <SPAN Class="swiss">No_Implementation_Extensions</SPAN>. 
This is specified by <A NAME="I1533"></A><A NAME="I1534"></A></div>
<div class="SwissExamples"><B>pragma</B>&nbsp;Profile(No_Implementation_Extensions);</div>
<div class="Normal" style="margin-bottom: 0.4em">and is equivalent to 
writing</div>
<div class="SwissExamples"><B>pragma</B>&nbsp;Restrictions(<BR>
&nbsp;&nbsp;&nbsp;<SPAN Class="swiss">No_Implementation_Aspect_Specifications</SPAN>,<BR>
&nbsp;&nbsp;&nbsp;<SPAN Class="swiss">No_Implementation_Attributes</SPAN>,<BR>
&nbsp;&nbsp;&nbsp;<SPAN Class="swiss">No_Implementation_Identifiers</SPAN>,<BR>
&nbsp;&nbsp;&nbsp;<SPAN Class="swiss">No_Implementation_Pragmas</SPAN>,<BR>
&nbsp;&nbsp;&nbsp;<SPAN Class="swiss">No_Implementation_Units</SPAN>);</div>
<div class="Normal">thus providing blanket security against writing programs 
that use language extensions. This profile is defined in the core language. 
The only other profile defined in Ada 2012 is <SPAN Class="swiss">Ravenscar</SPAN> 
which was introduced in Ada 2005 and is in the Real-Time systems annex. 
Remember that the pragma <SPAN Class="swiss">Profile</SPAN> is a configuration 
pragma. <A NAME="I1535"></A><A NAME="I1536"></A></div>
<div class="Normal" style="margin-bottom: 0.4em">Finally, those of a 
recursive nature might note that writing</div>
<div class="SwissExamples"><B>pragma</B>&nbsp;Restrictions(No_Use_Of_Pragma&nbsp;=&gt;&nbsp;Restrictions);</div>
<div class="Normal">is illegal (this prevents the risk that the compiler 
might melt down). More curiously, there is not a restriction <SPAN Class="swiss">No_Implementation_Restrictions</SPAN>. 
This might be because of similar concern regarding what would happen 
with its recursive use.</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="Rat12-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="Rat12-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="Rat12-0-3.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="Rat12-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="Rat12-6-4.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="Rat12-6-6.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Class="Normal">&copy; 2011, 2012, 2013 John Barnes Informatics.</DIV>
<DIV Class="Normal">Sponsored in part by:</DIV>
<TABLE Summary="Sponsors" Width="800">
<TR><TD Width="250" Align="Center" VAlign="Top">
<SPAN Style="font-family: Arial, Helvetica, sans-serif; font-size: 92%">The <b><A HREF="http://www.adaic.org/community/">Ada Resource Association</A></b>:<BR><BR>
&nbsp;&nbsp;&nbsp; <A HREF="http://www.adaic.org"><IMG SRC="aralogo.gif" ALT="ARA" Height="120" Border="0"></A></SPAN>
</TD>
<TD Width="300" Align="Center" VAlign="Top">
<SPAN Style="font-family: Arial, Helvetica, sans-serif; font-size: 92%">&nbsp; <b><A HREF="http://www.adacore.com">AdaCore</A></b>:<BR><BR><BR>
&nbsp;&nbsp;&nbsp; <A HREF="http://www.adacore.com"><IMG SRC="adacore.gif" ALT="AdaCore" Height="80" Border="0"></A></SPAN>
</TD>
<TD Width="250" Align="Center" VAlign="Top">
<SPAN Style="font-family: Arial, Helvetica, sans-serif; font-size: 92%">and &nbsp; <b><A HREF="http://www.ada-europe.org">Ada-Europe</A></b>:<BR><BR>
<A HREF="http://www.ada-europe.org"><IMG SRC="AE_logo.gif" ALT="Ada-Europe" Height="128" Border="0"></A></SPAN>
</TD></TR>
</TABLE>
</BODY>
</HTML>
