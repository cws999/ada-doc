<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Tasking and real-time facilities</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-bottom: 0.6em}
    DIV.Indented1 {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 2.0em; margin-bottom: 0.6em}
    DIV.SwissExamples {font-family: Arial, Helvetica, sans-serif; font-size: 90%; line-height: 122%; margin-left: 2.2em; margin-bottom: 0.6em}
    DIV.Indented3MediumHanging-Body {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 6.0em; margin-top: 0em; margin-bottom: 0.6em}
    DIV.Indented3MediumHanging-Term {float: left; font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 2.0em; margin-top: 0em; margin-bottom: 0em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">
<H1 Style='font-family: "Rockwell", "Times New Roman", Times, serif; font-size: 240%'><B><SPAN Style="color:rgb(0,0,153)">Rationale Update</SPAN> for <SPAN Style="color:rgb(0,153,51)">Ada 2012</SPAN></B></H1>
<DIV Class="Normal"><FONT SIZE="+1"><I><A HREF="RCorr-TTL.html">John Barnes</A></I></FONT></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="RCorr-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RCorr-0-2.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RCorr-0-1.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RCorr-4.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RCorr-6.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>Chapter 5: Tasking and real-time facilities</H1>
<div class="Normal">The major topic in this area is providing features 
for multiprocessors and increasing control for scheduling.</div>
<div class="Normal" style="margin-bottom: 0.4em">The following Ada Issues 
cover this area:</div>
<div class="Indented3MediumHanging-Term"><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0001-1.TXT">1</A></div><div class="Indented3MediumHanging-Body">
Independence and representation clauses for atomic objects</div>
<div class="Indented3MediumHanging-Term"><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0033-1.TXT">33</A>*</div><div class="Indented3MediumHanging-Body">
Sets of CPUs when defining dispatching domains</div>
<div class="Indented3MediumHanging-Term"><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0048-1.TXT">48</A></div><div class="Indented3MediumHanging-Body">
Default behavior of tasks on a multiprocessor with a specified dispatching 
policy</div>
<div class="Indented3MediumHanging-Term"><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0051-1.TXT">51</A></div><div class="Indented3MediumHanging-Body">
The <SPAN Class="swiss">Priority</SPAN> aspect can be specified when 
<SPAN Class="swiss">Attach_ Handler</SPAN> is specified</div>
<div class="Indented3MediumHanging-Term"><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0052-1.TXT">52</A></div><div class="Indented3MediumHanging-Body">
Implicit objects are considered overlapping</div>
<div class="Indented3MediumHanging-Term"><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0055-1.TXT">55</A></div><div class="Indented3MediumHanging-Body">
All properties of a usage profile are defined by pragmas</div>
<div class="Indented3MediumHanging-Term"><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0073-1.TXT">73</A></div><div class="Indented3MediumHanging-Body">
Synchronous Barriers are not allowed with Ravenscar</div>
<div class="Indented3MediumHanging-Term"><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0081-1.TXT">81</A></div><div class="Indented3MediumHanging-Body">
Real-time aspects need to specify when they are evaluated</div>
<div class="Indented3MediumHanging-Term"><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0082-1.TXT">82</A></div><div class="Indented3MediumHanging-Body">
Definition of &quot;dispatching domain&quot;</div>
<div class="Indented3MediumHanging-Term"><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0090-1.TXT">90</A></div><div class="Indented3MediumHanging-Body">
Pre- and postconditions and requeues</div>
<div class="Indented3MediumHanging-Term"><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0098-1.TXT">98</A></div><div class="Indented3MediumHanging-Body">
Problematic examples for ATC</div>
<div class="Indented3MediumHanging-Term"><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0107-1.TXT">107</A></div><div class="Indented3MediumHanging-Body">
A prefixed view of a <SPAN Class="swiss">By_Protected_Procedure</SPAN> 
interface has convention protected</div>
<div class="Indented3MediumHanging-Term"><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0114-1.TXT">114</A></div><div class="Indented3MediumHanging-Body">
Overlapping objects designated by access parameters are not thread-safe</div>
<div class="Indented3MediumHanging-Term"><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0117-1.TXT">117</A></div><div class="Indented3MediumHanging-Body">
Restriction <SPAN Class="swiss">No_Tasks_Unassigned_To_CPU</SPAN></div>
<div class="Indented3MediumHanging-Term"><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0129-1.TXT">129</A></div><div class="Indented3MediumHanging-Body">
Make protected objects more protecting</div>
<div class="Normal">These changes can be grouped as follows.</div>
<div class="Normal">First there are some clarifications and additions 
to dispatching domains which were added in 2012 (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0033-1.TXT">33</A>, 
<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0048-1.TXT">48</A>, 
<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0082-1.TXT">82</A>). 
There are also some changes to the definition of the Ravenscar profile 
(<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0055-1.TXT">55</A>, 
<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0073-1.TXT">73</A>, 
<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0117-1.TXT">117</A>) 
and clarifications to some real-time aspects (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0051-1.TXT">51</A>, 
<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0081-1.TXT">81</A>). 
These are all in the Real-Time Systems annex (D).</div>
<div class="Normal">The examples of the use of ATC (asynchronous transfer 
of control) need further explanation (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0098-1.TXT">98</A>).</div>
<div class="Normal">The question of being thread-safe in the face of 
overlapping objects has always been tricky and the text in the opening 
part of Annex A is modified (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0052-1.TXT">52</A>, 
<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0114-1.TXT">114</A>).</div>
<div class="Normal">There are some improvements to the ability to control 
concurrent access in the core language (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0107-1.TXT">107</A>, 
<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0129-1.TXT">129</A>).</div>
<div class="Normal">The required support for aspects such as <SPAN Class="swiss">Pack</SPAN> 
and their interactions with atomicity is rationalized (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0001-1.TXT">1</A>). 
Note that this AI is a hangover from Ada 2005.</div>
<div class="Normal">Finally, there are changes to the core language regarding 
pre- and postconditions and requeue (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0090-1.TXT">90</A>).</div>

<HR SIZE=1>

<div class="Normal" style="margin-bottom: 0.4em">As defined in Ada 2012 
a dispatching domain consists of a set of processors whose CPU values 
are contiguous. However, this is unrealistic since CPUs are often grouped 
together in other ways. Accordingly, <A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0033-1.TXT">AI-33</A> 
adds a type <SPAN Class="swiss">CPU_Set</SPAN> and two functions to the 
package <SPAN Class="swiss">System.Multiprocessors.Dispatching_Domains</SPAN> 
thus <A NAME="I1041"></A><A NAME="I1042"></A><A NAME="I1043"></A></div>
<div class="SwissExamples"><B>type</B>&nbsp;CPU_Set&nbsp;<B>is&nbsp;array</B>&nbsp;(CPU&nbsp;<B>range</B>&nbsp;&lt;&gt;)&nbsp;<B>of</B>&nbsp;Boolean;</div>
<div class="SwissExamples"><B>function</B>&nbsp;Create(Set:&nbsp;CPU_Set)&nbsp;<B>return</B>&nbsp;Dispatching_Domain;<BR>
<B>function</B>&nbsp;Get_CPU_Set(Domain:&nbsp;Dispatching_Domain)&nbsp;<B>return</B>&nbsp;CPU_Set;</div>
<div class="Normal" style="margin-bottom: 0.4em">Moreover, the original 
functions <SPAN Class="swiss">Create</SPAN> and <SPAN Class="swiss">Get_Last_CPU</SPAN> 
are modified to be</div>
<div class="SwissExamples"><B>function</B>&nbsp;Create(First:&nbsp;CPU;&nbsp;Last:&nbsp;CPU_Range)&nbsp;<B>return</B>&nbsp;Dispatching_Domain;<BR>
<B>function</B>&nbsp;Get_Last_CPU(Domain:&nbsp;Dispatching_Domain)&nbsp;<B>return</B>&nbsp;CPU_Range;</div>
<div class="Normal">The changes enable <SPAN Class="swiss">Last</SPAN> 
to be zero thereby allowing for null domains. Remember that the type 
<SPAN Class="swiss">CPU_Range</SPAN> has lower bound of zero whereas 
the subtype <SPAN Class="swiss">CPU</SPAN> has lower bound of one. If 
a domain is empty then <SPAN Class="swiss">Get_Last_CPU</SPAN> returns 
zero and <SPAN Class="swiss">Get_First_CPU</SPAN> returns one.</div>
<div class="Normal">A minor editorial change is that many instances of 
<SPAN Class="swiss">Dispatching_Domain</SPAN> (which is a type name) 
are changed to dispatching domain (the concept) by <A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0082-1.TXT">AI-82</A>. 
An important clarification concerns the behaviour in the absence of any 
use of CPU and dispatching domains. The summary of <A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0048-1.TXT">AI-48</A> 
says that in the absence of any setting of the CPU of a task and the 
creation of any dispatching domains, a partition that specifies a language-defined 
dispatching policy will allow all tasks to run on all processors.</div>
<div class="Normal" style="margin-bottom: 0.4em">With regard to Ravenscar, 
the whole essence of its intention is to enable the use of a very simple 
runtime system. Accordingly, the newly added synchronous barriers should 
not be allowed and so the additional restriction<A NAME="I1044"></A><A NAME="I1045"></A></div>
<div class="SwissExamples">No_Dependence&nbsp;=&gt;&nbsp;Ada.Synchronous_Barriers</div>
<div class="Normal" style="margin-bottom: 0.4em">is added to the definition 
of the Ravenscar profile by <A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0073-1.TXT">AI-73</A>. 
Furthermore, in the case of multiprocessors, in order to permit analysis 
we need to ensure that all tasks (including the environment task) are 
assigned to a specific CPU and especially that no task is assigned zero 
which indicates <SPAN Class="swiss">Not_A_Specific_CPU</SPAN>. So a new 
restriction is introduced, namely<A NAME="I1046"></A></div>
<div class="SwissExamples">No_Tasks_Unassigned_To_CPU</div>
<div class="Normal" style="margin-bottom: 0.4em">and this is also added 
to the definition of the Ravenscar profile (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0117-1.TXT">AI-117</A>). 
Moreover, Ravenscar requires that the CPUs are denoted statically so 
another restriction is introduced <A NAME="I1047"></A></div>
<div class="SwissExamples">No_Dynamic_CPU_Assignment</div>
<div class="Normal">and this is also added to Ravenscar (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0055-1.TXT">AI-55</A>).</div>
<div class="Normal" style="margin-bottom: 0.4em">There are some clarifications 
concerning aspects in the Real-Time annex. One is simply to say that 
the real-time aspects of a type are evaluated when an object of the task 
type is actually declared (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0081-1.TXT">AI-81</A>). 
This applies to the aspects <SPAN Class="swiss">Priority</SPAN> and <SPAN Class="swiss">Interrupt_Priority</SPAN> 
and also to <SPAN Class="swiss">CPU</SPAN>. Remember that the aspects 
do not necessarily have to be static, in particular they could be discriminants 
of the type and different for different objects. Thus <A NAME="I1048"></A><A NAME="I1049"></A><A NAME="I1050"></A><A NAME="I1051"></A><A NAME="I1052"></A><A NAME="I1053"></A></div>
<div class="SwissExamples"><B>task&nbsp;type</B>&nbsp;Slave(N:&nbsp;CPU_Range)<BR>
&nbsp;&nbsp;&nbsp;<B>with</B>&nbsp;CPU&nbsp;=&gt;&nbsp;N;</div>
<div class="SwissExamples">Tom:&nbsp;Slave(1);&nbsp;&nbsp;&nbsp;Dick:&nbsp;Slave(2);&nbsp;&nbsp;&nbsp;Harry:&nbsp;Slave(3);</div>
<div class="Normal" style="margin-bottom: 0.4em">It is easy to be confused 
regarding priorities and interrupt priorities. Typically, a protected 
procedure used as an interrupt handler would have aspects giving the 
priority and interrupt to be handled thus</div>
<div class="SwissExamples"><B>procedure</B>&nbsp;Handler<BR>
&nbsp;&nbsp;&nbsp;<B>with</B>&nbsp;Attach_Handler&nbsp;=&gt;&nbsp;Some_Interrupt,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Interrupt_Priority&nbsp;=&gt;&nbsp;Hot_Priority;</div>
<div class="Normal">However, if the procedure <SPAN Class="swiss">Handler</SPAN> 
is in a protected type <SPAN Class="swiss">Monitor</SPAN> then the priority 
could be given on <SPAN Class="swiss">Monitor</SPAN> itself using the 
aspects <SPAN Class="swiss">Priority</SPAN> or <SPAN Class="swiss">Interrupt_Priority</SPAN>. 
If no interrupt priority or priority aspect is specified, the priority 
is implementation-defined but in the range of interrupt priority. (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0051-1.TXT">AI-51</A>).</div>
<div class="Normal" style="margin-bottom: 0.4em">The mechanism for Asynchronous 
Transfer of Control (ATC) uses a form of select statement thus<A NAME="I1054"></A></div>
<div class="SwissExamples"><B>select</B><BR>
&nbsp;&nbsp;&nbsp;<B>delay</B>&nbsp;...&nbsp;;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>triggering&nbsp;alternative</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;...<BR>
<B>then&nbsp;abort</B><BR>
&nbsp;&nbsp;&nbsp;Do_Something;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>abortable&nbsp;part</I></SPAN><BR>
<B>end&nbsp;select</B>;</div>
<div class="Normal">This depends upon there being places in the abortable 
part that are abort completion points. The examples given in the RM in 
9.7.4 rely upon this and some extra explanation is added (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0098-1.TXT">AI-98</A>).<A NAME="I1055"></A></div>
<div class="Normal" style="margin-bottom: 0.4em">There has always been 
&quot;boilerplate&quot; in A(3) about reentrancy. The obvious example 
is that<A NAME="I1056"></A></div>
<div class="SwissExamples"><B>task</B>&nbsp;T1&nbsp;<B>is</B><BR>
<B>begin</B><BR>
&nbsp;&nbsp;&nbsp;Put(A_File,&nbsp;&quot;Text&quot;);<BR>
<B>end</B>&nbsp;T1;</div>
<div class="SwissExamples"><B>task</B>&nbsp;T2&nbsp;<B>is</B><BR>
<B>begin</B><BR>
&nbsp;&nbsp;&nbsp;Put(A_File,&nbsp;&quot;More&nbsp;Text&quot;);<BR>
<B>end</B>&nbsp;T2;</div>
<div class="Normal" style="margin-bottom: 0.4em">is not required to 
work (being unsafe use of a shared variable, namely <SPAN Class="swiss">A_File</SPAN>). 
But if we change <SPAN Class="swiss">T2</SPAN> to</div>
<div class="SwissExamples"><B>task</B>&nbsp;T2&nbsp;<B>is</B><BR>
<B>begin</B><BR>
&nbsp;&nbsp;&nbsp;Put(B_File,&nbsp;&quot;More&nbsp;Text&quot;);<BR>
<B>end</B>&nbsp;T2;</div>
<div class="Normal" style="margin-bottom: 0.4em">then it is required 
to work provided <SPAN Class="swiss">A_File</SPAN> and <SPAN Class="swiss">B_File</SPAN> 
are indeed truly different files. The wording in A(3) is improved to 
be more explicit with regard to parameter passing (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0052-1.TXT">AI-52</A>, 
<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0114-1.TXT">AI-114</A>). 
It now becomes</div>
<div class="Indented1">&quot;The implementation shall ensure that each 
language-defined subprogram is reentrant in the sense that concurrent 
calls on any language-defined subprogram perform as specified, so long 
as all objects that are denoted by parameters that could be passed by 
reference or designated by parameters of an access type are nonoverlapping.&quot; 
</div>
<div class="Normal" style="margin-bottom: 0.4em">An important difference 
between protected functions and protected procedures (and entries) is 
that protected functions can be accessed concurrently. The principle 
is that such functions should be used for interrogating state and not 
to change it. However, in the case of calling functions inside a container, 
they do often change state. Accordingly, to enable containers to be used 
by parallel tasks and to impose control of access by protected objects, 
it is necessary to be able to make protected functions behave like protected 
procedures and so prevent multiple access. This can be done by a new 
aspect <SPAN Class="swiss">Exclusive_Functions</SPAN> which can be given 
for a protected type or a single protected object. Thus we write <A NAME="I1057"></A><A NAME="I1058"></A></div>
<div class="SwissExamples"><B>protected&nbsp;type</B>&nbsp;PT<BR>
&nbsp;&nbsp;&nbsp;<B>with</B>&nbsp;Exclusive_Functions;<BR>
&nbsp;&nbsp;&nbsp;...</div>
<div class="Normal">and then all protected functions declared within 
<SPAN Class="swiss">PT</SPAN> have exclusive access. Note carefully that 
the aspect is not permitted on individual protected functions but on 
the protected type (or object) as a whole. (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0129-1.TXT">AI-129</A>).</div>
<div class="Normal">The usual convention for a prefixed view of a subprogram 
is <SPAN Class="swiss">Intrinsic</SPAN> which means that <SPAN Class="swiss">'Access</SPAN> 
cannot be applied. However, an awkward situation has been discovered 
in the case of a subprogram with aspect <SPAN Class="swiss">Synchronization</SPAN> 
being <SPAN Class="swiss">By_Protected_Procedure</SPAN>. (Remember that 
the possible values for the aspect <SPAN Class="swiss">Synchronization</SPAN> 
are <SPAN Class="swiss">By_Entry</SPAN>, <SPAN Class="swiss">By_Protected_Procedure</SPAN>, 
and <SPAN Class="swiss">Optional</SPAN>.) In that case the convention 
is deemed to be protected so that <SPAN Class="swiss">Access</SPAN> can 
be applied. (<A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0107-1.TXT">AI-107</A>).</div>
<div class="Normal"><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0001-1.TXT">AI-1</A> 
is a hangover from Ada 2005. The essence of the problem is that the language 
is inconsistent regarding the pragma (now aspect) <SPAN Class="swiss">Pack</SPAN>. 
On the one hand the text of the RM regarding packing says that entities 
have to be squeezed up really tightly. On the other hand alignment properties, 
atomicity and so on ought to be respected. The revised text clarifies 
that <SPAN Class="swiss">Pack</SPAN> should not do anything that violates 
other requirements.</div>
<div class="Normal">Finally, a bother with requeue is addressed by <A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0090-1.TXT">AI-90</A> 
(requeue has been the source of many bothers in the past so another one 
is not unexpected). This time the problem concerns pre- and postconditions. 
Suppose we have entries <SPAN Class="swiss">E1</SPAN> and <SPAN Class="swiss">E2</SPAN> 
with pre- and postconditions. And suppose that <SPAN Class="swiss">E1</SPAN> 
does a requeue onto <SPAN Class="swiss">E2</SPAN>. The current text is 
unclear as to what exactly is checked and when. Do we avoid checking 
any postcondition on <SPAN Class="swiss">E1</SPAN> and do we bypass any 
precondition on <SPAN Class="swiss">E2</SPAN>? Certainly not is the brief 
answer. Basically we require that the postcondition on <SPAN Class="swiss">E2</SPAN> 
implies that on <SPAN Class="swiss">E1</SPAN> by saying that they must 
fully conform. And moreover any precondition on <SPAN Class="swiss">E2</SPAN> 
is indeed checked when the call is requeued. Remember that parameters 
are passed on unchanged and that the requeue statement does not have 
any explicit parameters itself.</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="RCorr-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RCorr-0-2.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RCorr-0-1.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RCorr-4.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RCorr-6.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Class="Normal">&copy; 2016 John Barnes Informatics.</DIV>
</BODY>
</HTML>
